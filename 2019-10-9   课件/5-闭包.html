<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <button>按钮一</button>
    <button>按钮二</button>
    <button>按钮三</button>
    <script>
     /* 
       闭包定义：
       
       函数就是一个闭包

       函数可以使用函数之外定义的变量

       内部函数的作用域链仍然保持着对父级函数活动对象的引用，这就是闭包

       (1)函数嵌套函数；(2)子函数引用父函数的参数或者变量；(3)并且子函数还能被外界所引用，这个时候子函数的作用域链仍然保持着对父函数活动对象的引用，父函数的参数和变量不会被浏览器的垃圾机制给回收，此时打印父函数的函数返回值，会发现在返回值下面有一个scopes，这个scopes下面有个closure，他就是闭包(整个父级都形成了一个闭包环境)

       /* 
       
       全局活动对象在关闭浏览器之后才会被销毁
       
        */
     
            // function fn(){
            //     var a = 10;
            //     function fn2(){
            //         a++;
            //         console.log(a);
            //     }
            //     function fn3(){

            //     }
            //     console.dir(fn3)
            //     return fn2;
            // }

            // var f = fn();

            // console.dir(f);

            // f();
            // f();
            
          /*       
             自定义属性
          const btns = document.querySelectorAll('button');

            for(var i=0;i<btns.length;i++){
                btns[i].index = i;
                btns[i].onclick = function(){
                    alert(this.index);
                }
            } */
         
         /*  
            函数嵌套函数(闭包)
         
           const btns = document.querySelectorAll('button');
            for(var i=0;i<btns.length;i++){
            function fn(a){
                btns[a].onclick = function(){
                    alert(a);
                }
            }
            fn(i)

           for(var i=0;i<btns.length;i++){
                (function(i){
                 btns[i].onclick = function(){
                            alert(i);
                        }
                })(i)
                }
        } */

       /*  var a = 10;
        for(var i=0;i<10;i++){
            function fn(i){
                setTimeout(function(){
                    console.log(i);
                    console.log(a);
                },100);
            }
            fn(i);
        } */
        

    </script>
</body>
</html>