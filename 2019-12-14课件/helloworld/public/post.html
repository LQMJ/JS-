<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    注册的用户名：<input id="user" type="text"><span></span>
    注册的密码：<input type="password" id="pw">
    <button id="btn">提交</button>
    <script>
     /* 
        new URLSearchParams  将对象转成查询格式

          {
              user:this.value,
              pw:12345,
              age:10
          }

          user=小花花&pw12345&age=10
      */

    /*
      
       let obj = new URLSearchParams({
          user:'haha',
          pw:12345,
          age:'10'
      })

      console.log(''+obj) // user=haha&pw=12345&age=10 
      
    */

     user.onblur = function(){
        //  fetch('/post',{
        //      method:'post',  // 接口
        //      body:''+new URLSearchParams({
        //          user:this.value // 查询参数
        //      }),
        //      headers:{
        //          'content-type':'application/x-www-form-urlencoded'
        //      }
        //  }).then(d=>d.json()).then(d=>{
        //      console.log(d)
        //  })

         var xhr = new XMLHttpRequest;
         xhr.open('post','/post',true);
         xhr.setRequestHeader('haha','hehe');
         xhr.send('user='+this.value);
         xhr.onload = function(){
             console.log(xhr.responseText);
         }
     }

    
   
    </script>
</body>
</html>